<html>
<head>
  <title>D3 Inception</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="js/lodash.custom-1.2.1.min" type="text/javascript"></script>
</head>
<body>
    <style type="text/css">
      
      circle.happy{
        fill: white;
        stroke: green;
      }
      circle.angry{
        fill: red;
        stroke: black;
      }

      div.bar {
        display: inline-block;
        width: 20px;
        height: 75px;   /* We'll override this later */
        background-color: teal;
      }
    </style>

    <script type="text/javascript">



      //Width and height
      var w = 500;
      var h = 100;
      var barPadding = 1;
      
      var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
              11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];

      // var datainfo ={
      //   length : function(){ return dataset.length; },
      //   total : function (){
      //     var subtotal =0;
      //     _.each(dataset, function(data){
      //       subtotal+= data;
      //     });

      //     return subtotal;
      //   }
      //   avg: function(value){
      //     return ((value * this.length)/this.total);
      //   }
      // }
      
      //Create SVG element
      var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

      svg.selectAll("rect")
         .data(dataset)
         .enter()
         .append("rect")
         .attr("x", function(d, i) {
            return i * (w / dataset.length);
         })
         .attr("y", function(d) {
            return h - (d * 4);
         })
         .attr("width", w / dataset.length - barPadding)
         .attr("height", function(d) {
            return d * 4;
         })
         .attr("fill", function(d) {
          return "rgb(0, 0, " + (d * 10) + ")";
         });

      svg.selectAll("text")
         .data(dataset)
         .enter()
         .append("text")
         .text(function(d) {
            return d;
         })
         .attr("text-anchor", "middle")
         .attr("x", function(d, i) {
            return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
         })
         .attr("y", function(d) {
            return h - (d * 4) + 14;
         })
         .attr("font-family", "sans-serif")
         .attr("font-size", "11px")
         .attr("fill", "white");



    </script>
</body>
</html>
